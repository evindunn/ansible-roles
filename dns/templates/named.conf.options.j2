# vim: ft=jinja

# {{ ansible_managed }}

acl "trusted" {
    {% for client in dns_opts.trusted_clients %}
    {{ client }};
    {% endfor %}
};

options {
    directory "/var/cache/bind";
    dnssec-validation auto;
    listen-on-v6 { any; };

    recursion yes;
    allow-recursion { trusted; };
    listen-on { {{ ansible_default_ipv4.address }}; };
    allow-transfer { none; };

    forwarders {
        {% for ns in dns_opts.forwarders %}
        {{ ns }};
        {% endfor %}
    };
};
