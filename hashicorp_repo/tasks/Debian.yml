---

- include_vars: "{{ ansible_os_family }}.yml"

- name: make sure gnupg2 is installed
  package:
    name: gnupg2
    state: present

- name: Add the hashicorp gpg key
  apt_key:
    url: "{{ hashicorp_gpg_key }}"
    keyring: "{{ hashicorp_gpg_keyring }}"
    state: present

- name: Add the hashicorp repo
  apt_repository:
    repo: 'deb [signed-by="{{ hashicorp_gpg_keyring }}"] https://apt.releases.hashicorp.com {{ ansible_distribution_release }} main'
    state: present
    update_cache: true

